<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://primefaces.org/ui"
>
	<h:form id="lessonsForm">
		<p:dataTable var="student"
					 value="#{lessonModeBean.lessonStudents}"
					 sortBy="#{student.fullName}"
					 filteredValue="#{lessonModeBean.filteredLessonStudents}"
					 styleClass="lesson-mode-table"
					 scrollable="true"
					 frozenColumns="1"
		>
			<f:facet name="header">
				<p:commandButton title="#{msg['btn.backToLessons']}"
								 icon="fa fa-fw fa-arrow-left"
								 actionListener="#{lessonModeBean.backToLesson}"
								 update="@([id$=views])"/>
				#{msg['lessons']}
			</f:facet>

			<p:column sortBy="#{student.fullName}"
					  filterBy="#{student.fullName}"
					  filterMatchMode="startsWith"
					  styleClass="w300px">
				<h:outputText value="#{student.fullName}"/>
			</p:column>

			<p:columns value="#{lessonModeBean.stream.lessons}"
					   var="lesson"
					   columnIndexVar="colIndex"
					   styleClass="w90px
					   #{student.studentClasses[lesson.id].registered eq false ? 'skip' : ''}"
			>
				<f:facet name="header">
					<p:outputLabel value="#{lesson.classes[0] ne null ? lesson.classes[0].date : ''}"
								   converter="localDateConverter"/>
					<p:outputLabel styleClass="block font-size-10pt"
								   value="#{lesson.type ne null ? lesson.type.name : ''}"/>
				</f:facet>
				<h:outputText value="#{student.studentClasses[lesson.id].mark}"/>
			</p:columns>

		</p:dataTable>

	</h:form>
</ui:composition>
