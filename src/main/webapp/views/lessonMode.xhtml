<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://primefaces.org/ui"
>
	<h:form id="lessonsForm">
		<p:dataTable var="student" value="#{lessonModeBean.lessonStudents}"
					 sortBy="#{student.fullName}"
					 filteredValue="#{lessonModeBean.filteredLessonStudents}"
					 scrollable="true" frozenColumns="1"

		>
			<f:facet name="header">
				#{msg['lessons']}
			</f:facet>
			<p:columnGroup type="header">
				<p:row>
					<p:column rowspan="3" headerText="Students" />
					<p:column colspan="#{lessonModeBean.stream.lessons.size}" headerText="Lessons" />
				</p:row>
				<p:row>
					<ui:repeat value="#{lessonModeBean.stream.lessons}" var="lesson">
						<p:column headerText="#{lesson.classes[0].date}" />
					</ui:repeat>
				</p:row>
				<p:row>
					<ui:repeat value="#{lessonModeBean.stream.lessons}" var="lesson">
						<p:column headerText="#{lesson.type.name}" />
					</ui:repeat>
				</p:row>
			</p:columnGroup>

			<p:column>
				<h:outputText value="#{student.fullName}"/>
			</p:column>

			<p:columns value="#{lessonModeBean.stream.lessons}" var="lesson" columnIndexVar="colIndex"
					   >
				<h:outputText value="#{student.studentClasses[lesson.id].id}"/>
			</p:columns>


		</p:dataTable>

	</h:form>
</ui:composition>
